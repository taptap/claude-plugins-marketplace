# 代码审查报告模板（终端输出）

## 使用说明

此模板定义了 `/review` 命令在终端输出的格式。报告按以下结构组织：

1. **总览 (Summary)** - 统计信息
2. **按语言分组 (By Language)** - 每种语言的问题独立显示
3. **按维度分类 (By Dimension)** - Bug/质量/安全/性能

## 输出格式

```markdown
# 🔍 代码审查报告

## 📊 总览

- **审查范围**: [分支名] → [目标分支]
- **变更文件**: [文件数量] 个文件
- **涉及语言**: [语言列表，如：Go, Java, TypeScript]
- **发现问题**: [总问题数] 个（高置信度：[高置信度数量] 个）
- **审查维度**: Bug 检测、代码质量、安全检查、性能分析

---

## 🐛 Bug 检测 (Bug Detection)

### Go

#### ⚠️ High Confidence (≥80)

**[文件路径]:[行号]** `[置信度分数]/100`
```go
// 问题代码片段
```
**问题**: [问题描述]
**建议**: [修复建议]
**检测来源**: bug-detector-1 + bug-detector-2（冗余确认）

---

#### ⚡ Medium Confidence (60-79)

**[文件路径]:[行号]** `[置信度分数]/100`
```go
// 问题代码片段
```
**问题**: [问题描述]
**建议**: [修复建议]
**需要人工确认**: 此问题置信度未达到阈值，建议人工复核

---

### Java

[同上结构]

---

## 📐 代码质量 (Code Quality)

### Go

#### ⚠️ High Confidence (≥80)

**[文件路径]:[行号]** `[置信度分数]/100`
```go
// 问题代码片段
```
**问题**: [问题描述]
**建议**: [重构建议]
**检测来源**: code-quality-analyzer-1 + code-quality-analyzer-2（冗余确认）

---

### TypeScript

[同上结构]

---

## 🔒 安全检查 (Security Analysis)

### Go

#### ⚠️ High Confidence (≥80)

**[文件路径]:[行号]** `[置信度分数]/100`
```go
// 问题代码片段
```
**问题**: [安全漏洞描述]
**风险等级**: [高/中/低]
**建议**: [安全修复建议]
**检测来源**: security-analyzer-1 + security-analyzer-2（冗余确认）

---

### Java

[同上结构]

---

## ⚡ 性能分析 (Performance Analysis)

### Go

#### ⚠️ High Confidence (≥80)

**[文件路径]:[行号]** `[置信度分数]/100`
```go
// 问题代码片段
```
**问题**: [性能问题描述]
**影响**: [性能影响评估]
**建议**: [优化建议]
**检测来源**: performance-analyzer-1 + performance-analyzer-2（冗余确认）

---

### Python

[同上结构]

---

## 📋 项目规范检查 (Project Standards)

> 注：仅在项目根目录存在 `CLAUDE.md` 或 `CONTRIBUTING.md` 时执行

### 规范文件: CLAUDE.md

#### ⚠️ High Confidence (≥80)

**[文件路径]:[行号]** `[置信度分数]/100`
```
// 问题代码片段
```
**问题**: [规范违规描述]
**规范引用**: [CLAUDE.md 中的具体条款]
**建议**: [如何遵循规范]

---

## ✅ 审查结论

### 高优先级修复（置信度 ≥80）
- [ ] [文件名]:[行号] - [问题简述]
- [ ] [文件名]:[行号] - [问题简述]

### 建议修复（置信度 60-79，需人工确认）
- [ ] [文件名]:[行号] - [问题简述]
- [ ] [文件名]:[行号] - [问题简述]

### 统计信息
- **Bug 检测**: [数量] 个问题（高置信度：[数量]）
- **代码质量**: [数量] 个问题（高置信度：[数量]）
- **安全检查**: [数量] 个问题（高置信度：[数量]）
- **性能分析**: [数量] 个问题（高置信度：[数量]）

---

## 📌 注意事项

1. **置信度说明**：
   - ≥80: 高置信度，建议直接修复
   - 60-79: 中等置信度，需要人工确认
   - <60: 已自动过滤，不在报告中显示

2. **冗余确认机制**：
   - 当同一维度的 2 个 Agent 都发现相同问题时，置信度 +20
   - 标记为"冗余确认"的问题准确率更高

3. **审查范围**：
   - 仅审查 `git diff` 中的变更代码
   - 不审查未修改的代码

4. **语言支持**：
   - v0.0.1 完整支持：Go
   - v0.0.2+ 计划支持：Java, Python, Kotlin, Swift, TypeScript

---

*🤖 本报告由 Claude Code quality plugin 自动生成 | 9 个并行 AI Agent | 置信度阈值：80*
```

## 格式说明

### 分组策略

**优先按语言分组**，再按维度分类：
- 方便跨部门协作（不同团队关注不同语言）
- 每个语言的问题集中展示，易于分配责任人

### 置信度显示

每个问题显示置信度分数（0-100），格式：
```
**[文件路径]:[行号]** `85/100`
```

### 冗余标记

当 2 个同类 Agent 都发现问题时，添加标记：
```
**检测来源**: bug-detector-1 + bug-detector-2（冗余确认）
```

### 代码片段

使用语言特定的代码块，便于语法高亮：
```go
// Go 代码
```

```java
// Java 代码
```

### 过滤规则

- 只显示置信度 ≥60 的问题
- ≥80 标记为"High Confidence"
- 60-79 标记为"Medium Confidence"，需人工确认
- <60 自动过滤

## 输出示例

见上方"输出格式"部分的完整示例。

## 未来扩展

**v0.0.3+**：支持导出为其他格式
- JSON 格式（机器可读）
- HTML 格式（浏览器查看）
- CSV 格式（数据分析）
